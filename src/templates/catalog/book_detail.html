{% extends "base_generic.html" %}

{% block content %}
<div class="row">
  <div class="col-md-8">
    <h1>{{ book.title }}</h1>
    
    <p><strong>Author:</strong> {% for author in book.author.all %}<a href="{{ author.get_absolute_url }}">{{ author }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</p>
    <p><strong>Summary:</strong> {{ book.summary }}</p>
    <p><strong>ISBN:</strong> {{ book.isbn }}</p>
    <p><strong>Genre:</strong> {% for genre in book.genre.all %}<span class="badge bg-secondary">{{ genre }}</span> {% endfor %}</p>
    
    {% if book.publisher %}
    <p><strong>Publisher:</strong> {{ book.publisher }}</p>
    {% endif %}
    
    {% if book.publication_date %}
    <p><strong>Publication Date:</strong> {{ book.publication_date }}</p>
    {% endif %}
    
    <div class="mt-4">
      <h4>Copies</h4>
      {% for copy in book.bookinstance_set.all %}
      <div class="card mb-2">
        <div class="card-body">
          <p class="mb-1"><strong>ID:</strong> {{ copy.id }}</p>
          <p class="mb-1">
            <strong>Status:</strong>
            {% if copy.status == 'available' %}
            <span class="badge bg-success">{{ copy.get_status_display }}</span>
            {% elif copy.status == 'on_loan' %}
            <span class="badge bg-danger">{{ copy.get_status_display }}</span>
            {% elif copy.status == 'maintenance' %}
            <span class="badge bg-warning">{{ copy.get_status_display }}</span>
            {% else %}
            <span class="badge bg-info">{{ copy.get_status_display }}</span>
            {% endif %}
          </p>
          {% if copy.status != 'available' and copy.due_back %}
          <p class="mb-0"><strong>Due back:</strong> {{ copy.due_back }}</p>
          {% endif %}
        </div>
      </div>
      {% empty %}
      <p class="text-muted">No copies available.</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
